<!--pages/teacher/home/index.wxml-->
<view class="page">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- é”™è¯¯çŠ¶æ€ -->
  <view class="error-container" wx:elif="{{errorMsg}}">
    <text class="error-icon">ğŸ˜”</text>
    <text class="error-text">{{errorMsg}}</text>
    <button class="retry-btn" bindtap="onRetry">é‡è¯•</button>
  </view>

  <!-- ä¸»å†…å®¹ -->
  <view class="content" wx:elif="{{teacher}}">
    <!-- è®²å¸ˆä¿¡æ¯å¡ç‰‡ -->
    <view class="teacher-card card">
      <view class="teacher-header">
        <image class="teacher-avatar" src="{{teacher.avatar || '/images/default-avatar.png'}}" mode="aspectFill"></image>
        <view class="teacher-info">
          <text class="teacher-name">{{teacher.name}}</text>
          <text class="teacher-title">{{teacher.title}}</text>
        </view>
      </view>
      <view class="teacher-bio" wx:if="{{teacher.bio}}">
        <text>{{teacher.bio}}</text>
      </view>
    </view>

    <!-- è”ç³»äººå¡ç‰‡ -->
    <view class="contact-card card" wx:if="{{contactInfo}}">
      <view class="section-title">
        <text>{{contactInfo.type === 'broker' ? 'ä¸“å±é¡¾é—®' : 'è”ç³»è®²å¸ˆ'}}</text>
      </view>
      <view class="contact-info">
        <image class="contact-avatar" src="{{contactInfo.avatar || '/images/default-avatar.png'}}" mode="aspectFill"></image>
        <view class="contact-detail">
          <text class="contact-name">{{contactInfo.name}}</text>
          <view class="contact-actions">
            <button class="contact-btn" wx:if="{{contactInfo.phone}}" bindtap="onCallPhone">
              <text>ğŸ“</text>
              <text>ç”µè¯å’¨è¯¢</text>
            </button>
            <button class="contact-btn" wx:if="{{contactInfo.wechat}}" bindtap="onCopyWechat">
              <text>ğŸ’¬</text>
              <text>å¾®ä¿¡å’¨è¯¢</text>
            </button>
          </view>
        </view>
      </view>
    </view>

    <!-- èƒ½åŠ›æ¨¡å—åˆ—è¡¨ -->
    <view class="modules-section" wx:if="{{modules.length > 0}}">
      <view class="section-title">
        <text>æœåŠ¡èƒ½åŠ›</text>
      </view>
      <view class="modules-list">
        <view class="module-item card" wx:for="{{modules}}" wx:key="id">
          <text class="module-title">{{item.title}}</text>
          <text class="module-desc">{{item.description}}</text>
          <view class="module-tags" wx:if="{{item.tags && item.tags.length > 0}}">
            <text class="module-tag" wx:for="{{item.tags}}" wx:for-item="tag" wx:key="*this">{{tag}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- CTA æŒ‰é’® -->
    <view class="cta-container">
      <button class="cta-btn btn-primary" bindtap="onCtaClick">
        {{teacher.ctaConfig.primaryText || 'ç«‹å³å’¨è¯¢'}}
      </button>
    </view>
  </view>
</view>
